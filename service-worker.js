const C = 'optima-v1', U = '/', A = ['/', '/index.html', '/styles.css', '/styles-tailwind.css', '/scripts.js', '/assets/logo.png', '/assets/favicon.png', '/assets/card_branding.webp', '/assets/card_sites.webp', '/assets/card_email.webp', '/assets/card_data.webp', '/assets/card_automation.webp', '/assets/card_chatbot.webp', '/assets/card_agents.webp', '/assets/card_integrations.webp'];
self.addEventListener('install', e => e.waitUntil(caches.open(C).then(c => c.addAll(A)).then(() => self.skipWaiting())));
self.addEventListener('activate', e => e.waitUntil(caches.keys().then(k => Promise.all(k.filter(n => n !== C).map(n => caches.delete(n)))).then(() => self.clients.claim())));
self.addEventListener('fetch', e => { if (e.request.method !== 'GET' || !e.request.url.startsWith(self.location.origin)) return; e.respondWith(fetch(e.request).then(r => { const c = r.clone(); caches.open(C).then(x => x.put(e.request, c)); return r }).catch(() => caches.match(e.request).then(r => r || e.request.mode === 'navigate' ? caches.match(U) : new Response('Offline', { status: 503 })))) });
self.addEventListener('message', e => e.data?.type === 'SKIP_WAITING' && self.skipWaiting());
